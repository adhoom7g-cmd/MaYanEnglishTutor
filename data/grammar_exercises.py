"""Grammar exercises focused on business communication"""

GRAMMAR_EXERCISES = {
    "Polite Expressions and Requests": {
        "description": "Practice using polite language in professional contexts",
        "difficulty": "Beginner",
        "explanation": """
        In professional settings, we use polite expressions to make requests, ask questions, and communicate with customers.
        
        Key structures:
        - Could you...? / Would you...? (more polite than Can you...?)
        - Would you like...? (offering something)
        - I'd be happy to... (expressing willingness)
        - May I...? (asking permission politely)
        """,
        "exercises": [
            {
                "question": "Complete: _____ you like some help with your luggage?",
                "options": ["Would", "Do", "Are", "Will"],
                "correct": 0,
                "explanation": "'Would you like' is the polite way to offer assistance."
            },
            {
                "question": "Complete: _____ I see your identification, please?",
                "options": ["Can", "May", "Do", "Am"],
                "correct": 1,
                "explanation": "'May I' is the most polite way to ask permission or make a formal request."
            },
            {
                "question": "Complete: I _____ be happy to arrange that for you.",
                "options": ["will", "would", "can", "should"],
                "correct": 1,
                "explanation": "'I would be happy to' is a polite expression showing willingness to help."
            },
            {
                "question": "Complete: _____ you mind waiting for a few minutes?",
                "options": ["Would", "Do", "Are", "Will"],
                "correct": 0,
                "explanation": "'Would you mind' is a very polite way to make a request."
            },
            {
                "question": "Rewrite politely: 'Tell me your room number.'",
                "options": [
                    "What's your room number?",
                    "May I have your room number, please?",
                    "Give me your room number.",
                    "Your room number?"
                ],
                "correct": 1,
                "explanation": "Adding 'May I have' and 'please' makes the request much more polite and professional."
            }
        ]
    },
    "Present Perfect for Experiences": {
        "description": "Use present perfect tense for guest experiences and hotel situations",
        "difficulty": "Intermediate",
        "explanation": """
        Present Perfect (have/has + past participle) is used to:
        - Talk about experiences without specific time: "Have you stayed here before?"
        - Describe recent actions with current relevance: "I have completed your reservation."
        - Talk about situations that started in the past and continue: "We have been in business for 20 years."
        """,
        "exercises": [
            {
                "question": "Complete: _____ you _____ at our hotel before?",
                "options": ["Did / stay", "Have / stayed", "Are / staying", "Do / stay"],
                "correct": 1,
                "explanation": "Use present perfect 'Have you stayed' to ask about past experience."
            },
            {
                "question": "Complete: I _____ your reservation and sent you a confirmation email.",
                "options": ["complete", "completed", "have completed", "am completing"],
                "correct": 2,
                "explanation": "Use present perfect 'have completed' to show a recently finished action with current relevance."
            },
            {
                "question": "Complete: We _____ in the tourism industry for over 15 years.",
                "options": ["are", "were", "have been", "will be"],
                "correct": 2,
                "explanation": "Use present perfect 'have been' for situations that started in the past and continue to the present."
            },
            {
                "question": "Complete: The guest _____ just _____ in.",
                "options": ["is / checking", "has / checked", "did / check", "will / check"],
                "correct": 1,
                "explanation": "Use present perfect 'has just checked' for very recent completed actions."
            },
            {
                "question": "Complete: I'm sorry, but the room _____ not _____ cleaned yet.",
                "options": ["is / been", "has / been", "was / been", "have / been"],
                "correct": 1,
                "explanation": "Use present perfect 'has not been' to talk about something that hasn't happened yet but is expected."
            }
        ]
    },
    "Modal Verbs for Offers and Suggestions": {
        "description": "Use modal verbs appropriately in service situations",
        "difficulty": "Intermediate",
        "explanation": """
        Modal verbs help us express offers, suggestions, and possibilities:
        - Can/Could: ability and offers - "I can help you" / "Could I suggest..."
        - May/Might: possibility - "It may take a few minutes"
        - Should/Would: advice and preferences - "You should visit..." / "Would you prefer..."
        - Must: strong obligation - "You must check out by 11 AM"
        """,
        "exercises": [
            {
                "question": "Complete: You _____ visit the fortress - it's beautiful!",
                "options": ["must", "should", "can", "may"],
                "correct": 1,
                "explanation": "'Should' is used to give recommendations or suggestions."
            },
            {
                "question": "Complete: _____ I suggest an upgrade to a suite?",
                "options": ["Should", "Must", "Could", "Would"],
                "correct": 2,
                "explanation": "'Could I suggest' is a polite way to make a recommendation."
            },
            {
                "question": "Complete: The maintenance team _____ be there within 15 minutes.",
                "options": ["should", "must", "can", "may"],
                "correct": 0,
                "explanation": "'Should' expresses what we expect to happen."
            },
            {
                "question": "Complete: _____ you like to upgrade your room?",
                "options": ["Do", "Would", "Should", "Can"],
                "correct": 1,
                "explanation": "'Would you like' is the polite way to make offers."
            },
            {
                "question": "Complete: I _____ arrange transportation for you if you'd like.",
                "options": ["should", "must", "can", "may"],
                "correct": 2,
                "explanation": "'Can' expresses ability and is used to make offers."
            }
        ]
    },
    "Passive Voice in Business Context": {
        "description": "Use passive voice for professional and formal communication",
        "difficulty": "Advanced",
        "explanation": """
        Passive voice (be + past participle) is common in business English because:
        - It sounds more formal and professional
        - It focuses on the action, not who does it
        - It's useful when the doer is unknown or not important
        
        Examples:
        - "Your room has been reserved." (focus on the room)
        - "The hotel was built in 1990." (builder not important)
        - "Breakfast is served from 7 to 10 AM." (who serves is not important)
        """,
        "exercises": [
            {
                "question": "Complete: Your reservation _____ confirmed.",
                "options": ["is", "has been", "was", "will"],
                "correct": 1,
                "explanation": "Use present perfect passive 'has been confirmed' for a recently completed action."
            },
            {
                "question": "Complete: All rooms _____ cleaned daily.",
                "options": ["is", "are", "were", "been"],
                "correct": 1,
                "explanation": "Use simple present passive 'are cleaned' for regular actions."
            },
            {
                "question": "Complete: A complimentary breakfast _____ included in your rate.",
                "options": ["is", "has", "was", "will"],
                "correct": 0,
                "explanation": "Use simple present passive 'is included' for current facts."
            },
            {
                "question": "Rewrite in passive: 'We will process your refund within 7 days.'",
                "options": [
                    "Your refund will process within 7 days.",
                    "Your refund will be processed within 7 days.",
                    "Your refund is processed within 7 days.",
                    "Your refund was processed within 7 days."
                ],
                "correct": 1,
                "explanation": "Use future passive 'will be processed' to talk about future actions."
            },
            {
                "question": "Complete: The website _____ updated last week.",
                "options": ["is", "has been", "was", "will be"],
                "correct": 2,
                "explanation": "Use simple past passive 'was updated' for completed past actions."
            }
        ]
    },
    "Conditionals for Policies and Procedures": {
        "description": "Use conditional sentences to explain policies and offer alternatives",
        "difficulty": "Advanced",
        "explanation": """
        Conditionals help express policies and possibilities:
        
        First Conditional (likely/real situations):
        - "If you book now, you will receive a 10% discount."
        
        Second Conditional (hypothetical situations):
        - "If you needed an extra bed, we could provide one."
        
        Zero Conditional (facts/policies):
        - "If guests check out late, they are charged an additional fee."
        """,
        "exercises": [
            {
                "question": "Complete: If you _____ early, we can arrange early check-in.",
                "options": ["arrive", "will arrive", "arrived", "would arrive"],
                "correct": 0,
                "explanation": "First conditional uses present simple in the 'if' clause for likely future situations."
            },
            {
                "question": "Complete: If I _____ you, I would book the deluxe room.",
                "options": ["am", "will be", "were", "would be"],
                "correct": 2,
                "explanation": "Second conditional uses 'were' in the 'if' clause for hypothetical advice."
            },
            {
                "question": "Complete: If guests _____ their key cards, they must contact reception.",
                "options": ["lose", "will lose", "lost", "would lose"],
                "correct": 0,
                "explanation": "Zero conditional uses present simple in both clauses for policies."
            },
            {
                "question": "Complete: We _____ you an upgrade if a suite becomes available.",
                "options": ["offer", "will offer", "offered", "would offer"],
                "correct": 1,
                "explanation": "First conditional uses 'will' in the main clause."
            },
            {
                "question": "Complete: If you _____ your reservation 24 hours in advance, you would receive a full refund.",
                "options": ["cancel", "cancelled", "will cancel", "would cancel"],
                "correct": 1,
                "explanation": "Second conditional uses past simple in the 'if' clause for hypothetical situations."
            }
        ]
    },
    "Professional Email Structures": {
        "description": "Master the structure and language of professional emails",
        "difficulty": "Intermediate",
        "explanation": """
        Professional email structure:
        
        1. Greeting: "Dear Mr./Ms. [Name]," or "Dear [Name],"
        2. Opening: State purpose - "I am writing to..." / "Thank you for..."
        3. Body: Provide details clearly and concisely
        4. Closing: "If you have any questions..." / "Please don't hesitate to contact us..."
        5. Sign-off: "Best regards," / "Sincerely,"
        """,
        "exercises": [
            {
                "question": "Best opening for a reservation confirmation email:",
                "options": [
                    "Hi there,",
                    "Dear Sir/Madam,",
                    "Dear Mr. Anderson,",
                    "Hello,"
                ],
                "correct": 2,
                "explanation": "Use the person's name when you know it for a more personal, professional touch."
            },
            {
                "question": "Complete: I am writing _____ your recent inquiry about our services.",
                "options": ["for", "about", "regarding", "to"],
                "correct": 2,
                "explanation": "'Regarding' is formal and appropriate for business correspondence."
            },
            {
                "question": "Best way to close a professional email:",
                "options": [
                    "Thanks, bye",
                    "Best regards,",
                    "See you,",
                    "Cheers,"
                ],
                "correct": 1,
                "explanation": "'Best regards' is professional and appropriate for business emails."
            },
            {
                "question": "Complete: Please find the document _____ to this email.",
                "options": ["attached", "included", "with", "in"],
                "correct": 0,
                "explanation": "'Attached' is the standard term for email attachments."
            },
            {
                "question": "Professional way to offer help:",
                "options": [
                    "If you need anything, let me know.",
                    "Please don't hesitate to contact us if you have any questions.",
                    "Ask me if you need help.",
                    "Contact us for more info."
                ],
                "correct": 1,
                "explanation": "This is the most complete and professional way to offer assistance."
            }
        ]
    }
}

def get_all_topics():
    """Return list of all grammar topics"""
    return list(GRAMMAR_EXERCISES.keys())

def get_exercises_by_topic(topic):
    """Return exercises for a specific topic"""
    return GRAMMAR_EXERCISES.get(topic)

def get_exercises_by_difficulty(difficulty):
    """Return exercises filtered by difficulty level"""
    return {topic: data for topic, data in GRAMMAR_EXERCISES.items() 
            if data['difficulty'] == difficulty}
